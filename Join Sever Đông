MoonLib:MakeNotification({Name = "! Complete Join Sever ƒê√¥ng !", Content = "# Wait 5s To Join Sever ƒê√¥ng #", Image = "rbxassetid://6031071050", Time = 5})

local HttpService = game:GetService("HttpService")
local TeleportService = game:GetService("TeleportService")
local Players = game:GetService("Players")

local PLACE_ID = game.PlaceId
local MAX_PLAYERS = 24

local function getServerList(cursor)
	local url = "https://games.roblox.com/v1/games/" .. PLACE_ID .. "/servers/Public?sortOrder=Desc&limit=100"
	if cursor then
		url = url .. "&cursor=" .. cursor
	end

	local success, response = pcall(function()
		return game:HttpGet(url)
	end)

	if not success then
		warn("Kh√¥ng th·ªÉ l·∫•y danh s√°ch server:", response)
		return nil
	end

	local data = HttpService:JSONDecode(response)
	return data
end

local function findMostPopulatedServer()
	local cursor = nil
	local bestServer = nil
	local mostPlayers = -1

	repeat
		local data = getServerList(cursor)
		if not data then break end

		for _, server in pairs(data.data) do
			local playerCount = server.playing
			if playerCount < MAX_PLAYERS and playerCount > mostPlayers and server.id ~= game.JobId then
				mostPlayers = playerCount
				bestServer = server
			end
		end

		cursor = data.nextPageCursor
	until not cursor

	return bestServer
end

task.spawn(function()
	local server = findMostPopulatedServer()
	if server then
		warn("T√¨m th·∫•y server v·ªõi " .. server.playing .. " ng∆∞·ªùi ch∆°i. S·∫Ω teleport sau 5 gi√¢y...")
		task.wait(5) -- üïí Ch·ªù 5 gi√¢y tr∆∞·ªõc khi teleport
		TeleportService:TeleportToPlaceInstance(PLACE_ID, server.id, Players.LocalPlayer)
	else
		warn("Kh√¥ng t√¨m th·∫•y server ph√π h·ª£p ƒë·ªÉ d·ªãch chuy·ªÉn.")
	end
end)
